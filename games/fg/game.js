(()=>{var e={541:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function n(e,r,n){var o=function(e){var t={current:0,next:function(){return++this.current}},r={};return{add:function(n,o){var s=null!=o?o:"".concat(t.next(),"_").concat(e);return r[s]=n,s},resolve:function(e,t,n){var o=r[e];o&&(n(t)?o.resolve(t):o.reject(t),r[e]=null)}}}(n);return r((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,r=t.request_id,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["request_id"]);r&&o.resolve(r,n,(function(e){return!("error_type"in e)}))}})),function(r,n){return void 0===n&&(n={}),new Promise((function(s,a){var i=o.add({resolve:s,reject:a},n.request_id);e(r,t(t({},n),{request_id:i}))}))}}var o,s,a,i,p,d,l,c,u="undefined"!=typeof window,h=Boolean(u&&window.AndroidBridge),b=Boolean(u&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),f=Boolean(u&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),m=u&&!h&&!b,A=m&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),y=m?"message":"VKWebAppEvent",v=r(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile"],m&&!A?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppGetFriends","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),g=u?window.AndroidBridge:void 0,_=b?window.webkit.messageHandlers:void 0,S=m?parent:void 0;e.EAdsFormats=void 0,(o=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",o.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(s=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",s.OVERLAY="overlay",e.BannerAdLocation=void 0,(a=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",a.BOTTOM="bottom",e.BannerAdAlign=void 0,(i=e.BannerAdAlign||(e.BannerAdAlign={})).LEFT="left",i.RIGHT="right",i.CENTER="center",e.EGrantedPermission=void 0,(p=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",p.LOCATION="location",p.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(d=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",d.UK="uk",d.UA="ua",d.EN="en",d.BE="be",d.KZ="kz",d.PT="pt",d.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(l=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",l.EDITOR="editor",l.MEMBER="member",l.MODER="moder",l.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(c=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",c.DESKTOP_WEB_MESSENGER="desktop_web_messenger",c.DESKTOP_APP_MESSENGER="desktop_app_messenger",c.MOBILE_WEB="mobile_web",c.MOBILE_ANDROID="mobile_android",c.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",c.MOBILE_IPHONE="mobile_iphone",c.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",c.MOBILE_IPAD="mobile_ipad";var W=function(e){var t=void 0,o=[],s=Math.random().toString(36).substring(2,5);function a(e){o.push(e)}function i(){return b||h}function p(){return m&&window.parent!==window}function d(){return i()||p()}function l(e){if(b||h)return r([],o,!0).map((function(t){return t.call(null,e)}));var n=null==e?void 0:e.data;if(m&&n){if(f&&"string"==typeof n)try{n=JSON.parse(n)}catch(e){}var s=n.type,a=n.data,i=n.frameId;s&&("VKWebAppSettings"!==s?r([],o,!0).map((function(e){return e({detail:{type:s,data:a}})})):t=i)}}f&&/(android)/i.test(navigator.userAgent)?document.addEventListener(y,l):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(y,l);var c=n((function(e,r){g&&g[e]?g[e](JSON.stringify(r)):_&&_[e]&&"function"==typeof _[e].postMessage?_[e].postMessage(r):f?window.ReactNativeWebView.postMessage(JSON.stringify({handler:e,params:r})):S&&"function"==typeof S.postMessage&&S.postMessage({handler:e,params:r,type:"vk-connect",webFrameId:t,connectVersion:"2.14.1"},"*")}),a,s);return{send:c,sendPromise:c,subscribe:a,unsubscribe:function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)},supports:function(e){return h?!(!g||"function"!=typeof g[e]):b?!(!_||!_[e]||"function"!=typeof _[e].postMessage):!!m&&v.includes(e)},isWebView:i,isIframe:p,isEmbedded:d,isStandalone:function(){return!d()}}}();e.applyMiddleware=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.includes(void 0)||r.includes(null)?e.apply(void 0,r.filter((function(e){return"function"==typeof e}))):function(e){if(0===r.length)return e;var n,o={subscribe:e.subscribe,send:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.send.apply(e,t)}},s=r.filter((function(e){return"function"==typeof e})).map((function(e){return e(o)})).reduce((function(e,t){return function(r){return e(t(r))}}));return n=s(e.send),t(t({},e),{send:n})}},e.default=W,e.parseURLSearchParamsForGetLaunchParams=function(t){var r={};try{new URLSearchParams(t).forEach((function(t,n){switch(n){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":r[n]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":r[n]=t;break;case"odr_enabled":r.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":r[n]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":r.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":r.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":r.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return r},Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(541);r.n(e)().send("VKWebAppInit",{});const t={type:Phaser.AUTO,width:800,height:600,scene:{preload:function(){this.load.image(n.SKY,"assets/sky.png"),this.load.image(n.GROUND,"assets/platform.png"),this.load.image(n.STAR,"assets/star.png"),this.load.image(n.BOMB,"assets/bomb.png"),this.load.spritesheet(n.DUDE,"assets/dude.png",{frameWidth:32,frameHeight:48}),this.load.audio(n.STAR_COLLECT_SOUND,"assets/collectStarSound.ogg"),this.load.audio(n.BOMB_COLLIDE_PLATFORM_SOUND,"assets/bombCollideWithPlatformSound.ogg")},create:function(){this.add.image(400,300,n.SKY),this.collectStarSound=this.sound.add(n.STAR_COLLECT_SOUND),this.bombCollidePlatformSound=this.sound.add(n.BOMB_COLLIDE_PLATFORM_SOUND),this.score=0,this.platforms=this.physics.add.staticGroup(),this.platforms.create(400,568,n.GROUND).setScale(2).refreshBody(),this.platforms.create(600,400,"ground"),this.platforms.create(50,250,"ground"),this.platforms.create(750,220,"ground"),this.player=this.physics.add.sprite(100,450,n.DUDE),this.player.setBounce(.2),this.player.setCollideWorldBounds(!0),this.anims.create({key:"left",frames:this.anims.generateFrameNumbers(n.DUDE,{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"turn",frames:[{key:"dude",frame:4}],frameRate:20}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("dude",{start:5,end:8}),frameRate:10,repeat:-1}),this.stars=this.physics.add.group({key:n.STAR,repeat:11,setXY:{x:12,y:0,stepX:70}}),this.stars.children.iterate((e=>{e.setBounce(Phaser.Math.FloatBetween(.4,.8))})),this.physics.add.collider(this.player,this.platforms),this.physics.add.collider(this.stars,this.platforms),this.bombs=this.physics.add.group();let e=this,t=function(){let t=Phaser.Math.Between(0,800),r=e.bombs.create(t,16,n.BOMB);r.setBounce(1),r.setCollideWorldBounds(!0),r.setVelocity(Phaser.Math.Between(-200,200),20)};this.physics.add.overlap(this.player,this.stars,(function(r,n){n.disableBody(!0,!0),e.score+=10,e.scoreText.setText("Score: "+e.score),e.collectStarSound.play(),0===e.stars.countActive(!0)&&(e.stars.children.iterate((function(e){e.enableBody(!0,e.x,0,!0,!0)})),t())}),null,this),this.cursors=this.input.keyboard.createCursorKeys(),this.scoreText=this.add.text(16,16,"score: 0",{fontSize:"32px",fill:"#000"}),this.physics.add.collider(this.bombs,this.platforms,(()=>{this.bombCollidePlatformSound.play()}),null,this),this.physics.add.collider(this.player,this.bombs,(function(t,r){e.physics.pause(),e.player.setTint(16711680),e.player.anims.play("turn"),e.gameOver=!0,e.add.text(310,270,"Game Over",{fontSize:"32px",fill:"#000"}),e.add.text(220,320,"Кликни чтобы начать заново",{fontSize:"24px",fill:"#000"}),e.input.on("pointerdown",(function(t){console.log("down"),e.scene.restart()}),e)}),null,this),t()},update:function(){this.cursors.left.isDown?(this.player.setVelocityX(-160),this.player.anims.play("left",!0)):this.cursors.right.isDown?(this.player.setVelocityX(160),this.player.anims.play("right",!0)):(this.player.setVelocityX(0),this.player.anims.play("turn")),this.cursors.up.isDown&&this.player.body.touching.down&&this.player.setVelocityY(-330)}},physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}}},n={SKY:"sky",GROUND:"ground",STAR:"star",BOMB:"bomb",DUDE:"dude",STAR_COLLECT_SOUND:"starCollectSound",BOMB_COLLIDE_PLATFORM_SOUND:"bomColPlatSound"};new Phaser.Game(t)})()})();